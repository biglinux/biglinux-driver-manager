#!/bin/bash
##################################
#  Author1: Bruno Goncalves (www.biglinux.com.br) 
#  Author2: Rafael Ruscher (rruscher@gmail.com)  
#  Date:    2022/12/26 
#  
#  Description: Control Center to help usage of BigLinux 
#  
# Licensed by GPL V2 or greater
##################################

#Translation
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=biglinux-driver-manager

OIFS=$IFS
# kernel current version like mhwd
IFS=. read -r major minor _ <<< "$(uname -r)"


if uname -r | grep xanmod.*lts >/dev/null; then 
  current="linux-xanmod-lts"; 
elif uname -r | grep xanmod >/dev/null; then 
  current="linux-xanmod";  
else 
  current="linux$major$minor"; 
fi
IFS=$'\n'

SHOW_DRIVER() {

if [ "$VIDEO_DRIVER_ENABLED" = "true" ]; then
  DRIVER_ENABLE_OR_DISABLE=$"Remover"
  INSTALL_OR_REMOVE_KERNEL="remove_kernel_now"

  if [ "$Kernel_version" = "$current" ]; then
    DISABLED_BUTTON="disabled"
    DRIVER_ENABLE_OR_DISABLE=$"Em uso"
    dotcolor="green"
  else
    DISABLED_BUTTON="remove-button"
    DISABLED_MESSAGE=""
    dotcolor="green"
  fi

else
  DRIVER_ENABLE_OR_DISABLE=$"Instalar"
  INSTALL_OR_REMOVE_KERNEL="install_kernel_now"
  DISABLED_BUTTON=""
  DISABLED_MESSAGE=""
  dotcolor="gray"
fi

Kernel_version_CLEAN="$(echo "$Kernel_version" | sed 's|-| |g')"

if [ -n "$(echo "$Kernel_version" | grep -e xanmod)" ]; then 
  iconkernel='<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="chrome" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-chrome fa-w-16 fa-3x"><path fill="currentColor" d="M352 124.5l-51.9-13c-6.5-1.6-11.3-7.1-12-13.8s2.8-13.1 8.7-16.1l40.8-20.4L294.4 28.8c-5.5-4.1-7.8-11.3-5.6-17.9S297.1 0 304 0H416h32 16c30.2 0 58.7 14.2 76.8 38.4l57.6 76.8c6.2 8.3 9.6 18.4 9.6 28.8c0 26.5-21.5 48-48 48H538.5c-17 0-33.3-6.7-45.3-18.7L480 160H448v21.5c0 24.8 12.8 47.9 33.8 61.1l106.6 66.6c32.1 20.1 51.6 55.2 51.6 93.1C640 462.9 590.9 512 530.2 512H496 432 32.3c-3.3 0-6.6-.4-9.6-1.4C13.5 507.8 6 501 2.4 492.1C1 488.7 .2 485.2 0 481.4c-.2-3.7 .3-7.3 1.3-10.7c2.8-9.2 9.6-16.7 18.6-20.4c3-1.2 6.2-2 9.5-2.2L433.3 412c8.3-.7 14.7-7.7 14.7-16.1c0-4.3-1.7-8.4-4.7-11.4l-44.4-44.4c-30-30-46.9-70.7-46.9-113.1V181.5v-57zM512 72.3c0-.1 0-.2 0-.3s0-.2 0-.3v.6zm-1.3 7.4L464.3 68.1c-.2 1.3-.3 2.6-.3 3.9c0 13.3 10.7 24 24 24c10.6 0 19.5-6.8 22.7-16.3zM130.9 116.5c16.3-14.5 40.4-16.2 58.5-4.1l130.6 87V227c0 32.8 8.4 64.8 24 93H112c-6.7 0-12.7-4.2-15-10.4s-.5-13.3 4.6-17.7L171 232.3 18.4 255.8c-7 1.1-13.9-2.6-16.9-9s-1.5-14.1 3.8-18.8L130.9 116.5z"></path></svg>'
else 
  iconkernel='<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="chrome" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-chrome fa-w-16 fa-3x"><path fill="currentColor" d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"></path></svg>'
fi

if [ -n "$(echo "$Kernel_version" | grep rt)" ]; then  
  Lts='<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="chrome" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.933333 8.4666665" class="svg-inline--fa fa-chrome fa-w-16 fa-3x"><path fill="currentColor" d="M 1.732194 0.26251628 C 0.90666126 0.26251628 0.2418457 0.92733183 0.2418457 1.7528646 L 0.2418457 6.7138021 C 0.2418457 7.5393348 0.90666126 8.2041504 1.732194 8.2041504 L 15.201139 8.2041504 C 16.026672 8.2041504 16.691488 7.5393348 16.691488 6.7138021 L 16.691488 1.7528646 C 16.691488 0.92733183 16.026672 0.26251628 15.201139 0.26251628 L 1.732194 0.26251628 z M 6.1097046 1.778186 C 6.3868286 1.778186 6.6377937 1.8100088 6.8626302 1.8727539 C 7.0874667 1.935499 7.2808651 2.0319398 7.4429565 2.1626587 C 7.6050479 2.2933776 7.7282662 2.4610322 7.8119263 2.6649536 C 7.9008151 2.8636463 7.9452515 3.0984417 7.9452515 3.3703369 C 7.9452515 3.6526897 7.8876848 3.909217 7.7726522 4.1392822 C 7.6576196 4.3693474 7.4667438 4.5445702 7.2000773 4.6648315 C 7.2889661 4.8007792 7.3828843 4.952264 7.4822306 5.1195841 C 7.581577 5.2816755 7.6785346 5.4543756 7.7726522 5.637382 C 7.8667698 5.8151597 7.9556425 5.9954278 8.0393026 6.1784342 C 8.1281914 6.3562119 8.2039338 6.5263892 8.2666789 6.6884806 L 7.2548543 6.6884806 C 7.134593 6.3747553 6.9937157 6.0737916 6.8316243 5.7862101 C 6.6747617 5.4933999 6.5045844 5.1979983 6.321578 4.8999593 L 5.8197998 4.8999593 L 5.8197998 6.6884806 L 4.8550008 6.6884806 L 4.8550008 1.9037598 C 4.9491184 1.8828447 5.0511214 1.864669 5.1609253 1.8489827 C 5.2759579 1.8280677 5.3910913 1.8149374 5.5061239 1.8097087 C 5.6211565 1.7992511 5.7307276 1.791683 5.8353027 1.7864543 C 5.9398778 1.7812255 6.0312733 1.778186 6.1097046 1.778186 z M 8.5488322 1.8334798 L 12.078333 1.8334798 L 12.078333 2.633431 L 10.799858 2.633431 L 10.799858 6.6884806 L 9.8273071 6.6884806 L 9.8273071 2.633431 L 8.5488322 2.633431 L 8.5488322 1.8334798 z M 6.1097046 2.6174113 C 6.0731033 2.6174113 6.0286669 2.6204508 5.9763794 2.6256795 C 5.9240918 2.6256795 5.8720874 2.6307249 5.8197998 2.6411825 L 5.8197998 4.1000081 L 6.0311564 4.1000081 C 6.360568 4.1000081 6.5989196 4.037396 6.7453247 3.9119059 C 6.8917298 3.7811871 6.9649495 3.5978794 6.9649495 3.3625854 C 6.9649495 3.1063765 6.8861677 2.9185402 6.729305 2.7982788 C 6.5724424 2.6780174 6.3659136 2.6174113 6.1097046 2.6174113 z "></path></svg>'
elif [ -n "$(echo "$Kernel_version" | grep lts)" ]; then 
  Lts='<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="chrome" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.933333 8.4666665" class="svg-inline--fa fa-chrome fa-w-16 fa-3x"><path fill="currentColor" d="M 1.732194 0.26251628 C 0.90666126 0.26251628 0.2418457 0.92733183 0.2418457 1.7528646 L 0.2418457 6.7138021 C 0.2418457 7.5393348 0.90666126 8.2041504 1.732194 8.2041504 L 15.201139 8.2041504 C 16.026672 8.2041504 16.691488 7.5393348 16.691488 6.7138021 L 16.691488 1.7528646 C 16.691488 0.92733183 16.026672 0.26251628 15.201139 0.26251628 L 1.732194 0.26251628 z M 12.352734 1.7001546 C 12.650773 1.7001546 12.909823 1.7339834 13.129431 1.8019572 C 13.354268 1.869931 13.542621 1.9456734 13.694255 2.0293335 L 13.411584 2.7745076 C 13.280866 2.7013051 13.134426 2.638693 12.972335 2.5864054 C 12.815472 2.5341179 12.632681 2.5078573 12.423531 2.5078573 C 11.911113 2.5078573 11.655103 2.6936876 11.655103 3.0649292 C 11.655103 3.1590468 11.680846 3.2423573 11.733134 3.3155599 C 11.785422 3.3835337 11.851073 3.4466626 11.929504 3.5041789 C 12.013164 3.5564664 12.10456 3.6034255 12.203906 3.6452555 C 12.308481 3.6870856 12.410484 3.7259598 12.509831 3.762561 C 12.661465 3.8200773 12.818512 3.8857289 12.980603 3.9589315 C 13.147923 4.0269053 13.299408 4.1208234 13.435356 4.2410848 C 13.576532 4.3561174 13.691665 4.5025568 13.780554 4.6803345 C 13.869443 4.8528834 13.913879 5.0725425 13.913879 5.339209 C 13.913879 5.7941107 13.764917 6.1470788 13.466878 6.3980591 C 13.174068 6.6438106 12.726665 6.766512 12.125358 6.766512 C 11.722744 6.766512 11.401082 6.7245984 11.160559 6.6409383 C 10.920036 6.5520495 10.739768 6.4712616 10.619507 6.3980591 L 10.902177 5.6136108 C 11.043353 5.6972709 11.210491 5.7760528 11.403955 5.8492554 C 11.602648 5.9224579 11.843005 5.9588094 12.125358 5.9588094 C 12.287449 5.9588094 12.420759 5.9431564 12.525334 5.9117839 C 12.635138 5.8751826 12.721488 5.8282235 12.784233 5.7707072 C 12.846978 5.7079621 12.888891 5.6397879 12.909806 5.5665853 C 12.93595 5.488154 12.94908 5.4098888 12.94908 5.3314575 C 12.94908 5.2321112 12.920297 5.1432385 12.862781 5.0648071 C 12.805264 4.9863758 12.732045 4.9182015 12.643156 4.8606852 C 12.554267 4.7979402 12.454787 4.7428962 12.344983 4.6958374 C 12.235179 4.6435499 12.125608 4.5965908 12.015804 4.5547607 C 11.869399 4.5024732 11.717397 4.4423838 11.560535 4.37441 C 11.403672 4.3064362 11.260272 4.2200862 11.129553 4.1155111 C 11.004063 4.010936 10.899537 3.8831891 10.815877 3.7315552 C 10.732217 3.5746925 10.690304 3.3812941 10.690304 3.1512288 C 10.690304 2.6963272 10.836743 2.3403195 11.129553 2.0841105 C 11.427592 1.8279015 11.835088 1.7001546 12.352734 1.7001546 z M 3.0194539 1.8097087 L 3.9920044 1.8097087 L 3.9920044 5.8647583 L 6.0704305 5.8647583 L 6.0704305 6.6647095 L 3.0194539 6.6647095 L 3.0194539 1.8097087 z M 6.5804769 1.8097087 L 10.109977 1.8097087 L 10.109977 2.6096598 L 8.8315023 2.6096598 L 8.8315023 6.6647095 L 7.8589518 6.6647095 L 7.8589518 2.6096598 L 6.5804769 2.6096598 L 6.5804769 1.8097087 z "></path></svg>'
elif [ -n "$(echo "$Kernel_version" | grep -e linux419 -e linux54 -e linux510 -e linux515)" ]; then
  Lts='<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="chrome" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.933333 8.4666665" class="svg-inline--fa fa-chrome fa-w-16 fa-3x"><path fill="currentColor" d="M 1.732194 0.26251628 C 0.90666126 0.26251628 0.2418457 0.92733183 0.2418457 1.7528646 L 0.2418457 6.7138021 C 0.2418457 7.5393348 0.90666126 8.2041504 1.732194 8.2041504 L 15.201139 8.2041504 C 16.026672 8.2041504 16.691488 7.5393348 16.691488 6.7138021 L 16.691488 1.7528646 C 16.691488 0.92733183 16.026672 0.26251628 15.201139 0.26251628 L 1.732194 0.26251628 z M 12.352734 1.7001546 C 12.650773 1.7001546 12.909823 1.7339834 13.129431 1.8019572 C 13.354268 1.869931 13.542621 1.9456734 13.694255 2.0293335 L 13.411584 2.7745076 C 13.280866 2.7013051 13.134426 2.638693 12.972335 2.5864054 C 12.815472 2.5341179 12.632681 2.5078573 12.423531 2.5078573 C 11.911113 2.5078573 11.655103 2.6936876 11.655103 3.0649292 C 11.655103 3.1590468 11.680846 3.2423573 11.733134 3.3155599 C 11.785422 3.3835337 11.851073 3.4466626 11.929504 3.5041789 C 12.013164 3.5564664 12.10456 3.6034255 12.203906 3.6452555 C 12.308481 3.6870856 12.410484 3.7259598 12.509831 3.762561 C 12.661465 3.8200773 12.818512 3.8857289 12.980603 3.9589315 C 13.147923 4.0269053 13.299408 4.1208234 13.435356 4.2410848 C 13.576532 4.3561174 13.691665 4.5025568 13.780554 4.6803345 C 13.869443 4.8528834 13.913879 5.0725425 13.913879 5.339209 C 13.913879 5.7941107 13.764917 6.1470788 13.466878 6.3980591 C 13.174068 6.6438106 12.726665 6.766512 12.125358 6.766512 C 11.722744 6.766512 11.401082 6.7245984 11.160559 6.6409383 C 10.920036 6.5520495 10.739768 6.4712616 10.619507 6.3980591 L 10.902177 5.6136108 C 11.043353 5.6972709 11.210491 5.7760528 11.403955 5.8492554 C 11.602648 5.9224579 11.843005 5.9588094 12.125358 5.9588094 C 12.287449 5.9588094 12.420759 5.9431564 12.525334 5.9117839 C 12.635138 5.8751826 12.721488 5.8282235 12.784233 5.7707072 C 12.846978 5.7079621 12.888891 5.6397879 12.909806 5.5665853 C 12.93595 5.488154 12.94908 5.4098888 12.94908 5.3314575 C 12.94908 5.2321112 12.920297 5.1432385 12.862781 5.0648071 C 12.805264 4.9863758 12.732045 4.9182015 12.643156 4.8606852 C 12.554267 4.7979402 12.454787 4.7428962 12.344983 4.6958374 C 12.235179 4.6435499 12.125608 4.5965908 12.015804 4.5547607 C 11.869399 4.5024732 11.717397 4.4423838 11.560535 4.37441 C 11.403672 4.3064362 11.260272 4.2200862 11.129553 4.1155111 C 11.004063 4.010936 10.899537 3.8831891 10.815877 3.7315552 C 10.732217 3.5746925 10.690304 3.3812941 10.690304 3.1512288 C 10.690304 2.6963272 10.836743 2.3403195 11.129553 2.0841105 C 11.427592 1.8279015 11.835088 1.7001546 12.352734 1.7001546 z M 3.0194539 1.8097087 L 3.9920044 1.8097087 L 3.9920044 5.8647583 L 6.0704305 5.8647583 L 6.0704305 6.6647095 L 3.0194539 6.6647095 L 3.0194539 1.8097087 z M 6.5804769 1.8097087 L 10.109977 1.8097087 L 10.109977 2.6096598 L 8.8315023 2.6096598 L 8.8315023 6.6647095 L 7.8589518 6.6647095 L 7.8589518 2.6096598 L 6.5804769 2.6096598 L 6.5804769 1.8097087 z "></path></svg>'
else
  Lts=""
fi

cat << EOF >> /tmp/kernel-mhwd-$Kernel_version.html
<li>
  <div class="products">
  $iconkernel
    <font><b>$Kernel_version</b> <br><span style="font-weight: 300">$(LANG=C pacman -Si $Kernel_version  | grep -i "^Version" | cut -f2 -d:)</span></font>
  </div>
  <span class="status">
    <span class="status-circle $dotcolor"></span>
    $Lts
  </span>
  <div class="button-wrapper">
    <a class="content-button status-button  $DISABLED_BUTTON" $DISABLED_BUTTON" onclick="disableBodyConfigSimple();" href="kernel.sh.htm?${INSTALL_OR_REMOVE_KERNEL}=${Kernel_version}">
      $DRIVER_ENABLE_OR_DISABLE
    </a>
  </div>
</li>
EOF
}

VIDEO_DRIVER_SHOW_ALL_AND_IF_IS_FREE="$(mhwd-kernel -l | grep -vi kernels: | sed 's|.* ||g' | tac | sort -ru)"
# Show if installed
VIDEO_DRIVER_ENABLED_LIST="$(mhwd-kernel -li | grep -vi running | grep -vi kernels | sed 's|.* ||g')"

for i  in  $VIDEO_DRIVER_SHOW_ALL_AND_IF_IS_FREE; do
    Kernel_version="$(echo "$i" | cut -f1 -d" ")"
    VIDEO_DRIVER_OPEN="$(echo "$i" | cut -f2 -d" ")"

    if [ "$(echo "$VIDEO_DRIVER_ENABLED_LIST" | grep "^$Kernel_version$" )" != "" ]; then
        VIDEO_DRIVER_ENABLED="true"
    else
        VIDEO_DRIVER_ENABLED="false"
    fi

SHOW_DRIVER "$Kernel_version" "$VIDEO_DRIVER_ENABLED" "$VIDEO_DRIVER_COMPATIBLE" "$VIDEO_DRIVER_OPEN" &
done

wait

IFS=$OIFS
